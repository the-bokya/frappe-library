{% extends "./base.html" %} {% block title %} {% if delete_mode %} Delete
Members {% else %} Members {% endif %} {% endblock %} {% block main %} {% if
delete_mode %}
<form action="/members/delete" method="post">
  {% endif %}
  <table>
    <thead>
      {% if delete_mode %}
      <h1>Delete Members</h1>
      {% else %}
      <h1>Members</h1>
      {% endif %}
      <tr>
        {% if delete_mode %}
        <th>ðŸ—‘</th>
        {% endif %}
        <th>ID</th>
        <th>Name</th>
        <th>Registration Time</th>
        <th>Pending Returns</th>
        <th>Due Amount</th>
        <th>Issue</th>
      </tr>
    </thead>
    <tbody>
      {% for member in members %}
      {% set can_issue = member.due_amount < 500 %}
      <tr>
        {% if delete_mode %}
        <th>
          <input type="checkbox" name="delete" value="{{ member.memberid }}" />
        </th>
        {% endif %}
        <th>
            {{ member.memberid }}
        </th>
        <th>
          <a href="/members/update?id={{member.memberid}}">
          {{ member.name }}</th>
          </a>
        <th>{{ member.registration_timestamp }}</th>
        <th>{{ member.pending_books }}</th>
        <th>â‚¹{{ member.due_amount }}</th>
        <th>
        {% if can_issue %}
        <form action="/issue" method="get">
          <input type="hidden" name="memberid" value="{{member.memberid}}" />
          <button type="submit">Issue</button>
        </form>
        {% else %}
          Fee Exceeded â‚¹500
        {% endif %}
        </th>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if delete_mode %}
  <button type="submit"><strong>Delete</strong></button>
</form>
{% else %}
<a href="/members/create">
  <button>
    <strong>+ add members</strong>
  </button>
</a>
<a href="/members/delete">
  <button>
    <strong>- delete members</strong>
  </button>
</a>
{% endif %} {% endblock %}
